- job-group:
    name: 'FreeBSD-{branch}-aarch64-device_tests'
    device_name:
      - pinea64
      - beaglebone
    jobs:
      - 'FreeBSD-device-{device_name}'

- project:
    name: FreeBSD-device-pinea64
    device_name:
      - pinea64
    target_arch:
      - aarch64
    branch:
      - head
#     - stable-12
#     - stable-11
#     - releng-11_2
    jobs:
      - 'FreeBSD-device-{branch}-{device_name}-ci':
          target: arm64
          warnscanner: clang

- project:
    name: FreeBSD-device-beaglebone
    device_name:
      - beaglebone
    target_arch:
      - aarch64
    branch:
      - head
#     - stable-12
#     - stable-11
#     - releng-11_2
    jobs:
      - 'FreeBSD-device-{branch}-{device_name}-ci':
          target: arm64
          warnscanner: clang

- job-group:
    name: 'FreeBSD-device-{branch}-{device_name}-ci'
    jobs:
       - 'FreeBSD-{branch}-{target_arch}-ci'
       - 'FreeBSD-device-{branch}-{device_name}-test'

- job-template:
    defaults: global
#   disabled: true
    name: 'FreeBSD-device-{branch}-{device_name}-test'
    node: master
    scm:
      - 'FreeBSD-src-{branch}'
#    triggers:
#      - reverse:
#          jobs: 'FreeBSD-{branch}-{target_arch}-ci'
#          result: 'success'
    parameters:
      - string: # Not needed if git is being used.
          name: SVN_REVISION
          description: "Subversion revision"
    properties:
      - inject:
          properties-content: |
            FBSD_BRANCH={branch}
            FBSD_TARGET={target}
            FBSD_TARGET_ARCH={target_arch}
            LINK_TYPE=latest_tested
    builders:
      - add-svn-revision-description
      - checkout-scripts
      - execute-job-build-script
#     - setup-jail
#     - execute-in-jail
    publishers: []
#     - make-symlink # Posts symlink to artifact size
#     - publish-junit-results # TODO:find and update these if relevant
#     - scan-clang-warnings
#     - clean-jail
#     - mail-notify-failure
#     - mail-notify-fixed
    wrappers:
      - timestamps
      - timeout:
          timeout: 90
          timeout-var: 'BUILD_TIMEOUT'
          fail: true
          type: absolute
 
